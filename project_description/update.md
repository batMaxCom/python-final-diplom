# Обновление проекта

[Главная страница](../README.md)

[Содержание](../project_description/info.md)

## Ver. 2.0 

Список изменений:
* Добавлен файл README.md
* Добавлена возможность создания, изменения и удаления контактов.
* Добавлена возможность смены email с его дальнейшим подтверждением
* Исправлено обновление прайса:
* Если есть неверно прописанные поля, выводится ответ с ошибкой
* Если указан неверный путь к файлу, выдается ошибка
* Добавлено поле “ДатаВремя последнего обновления прайса”
* Добавлена валидация количества товаров добавляемых в корзину (не может быть ниже 1 и выше количества товара поставщика)
* При оформлении заказа отправляется письмо покупателю и поставщику
* При изменении статуса заказа отправляется письмо покупателю
* Добавлена валидация количества товаров при оформлении заказа. 
* Если количество товара у поставщика стало меньше, с момента добавления товара в корзину, выдается ошибка и требуется изменение количества товара в корзине.
* После успешного оформления заказа у поставщика вычитается количество товара.
* Изменена система отправки писем (с smtplib, на EmailMultiAlternatives django.core.mail)
* При регистрации можно указывать тип аккаунта (покупатель или продавец)
* При просмотре всех товаров убрана лишняя информация. Для просмотра полной информации о продукте следует перейти в карточку продукта.

## Ver. 2.1
Список изменений:
* Исправлены шаблоны отправки сообщений клиентам и поставщикам при оформлении заказов.

## Ver. 2.2
Список изменений:
* При восстановлении пароля выставлено ограничение запросов (throttle_scope)
* Перерасчет количества товара после оформления заказа перенесен в модель Order, как метод.
* Разрешения перенесены на глобальный уровень и больше не используется проверка через if user.is_authenticated и аналогичные.
* Представления(Views) были отредактированы согласно рекомендациям.
* Изменена система статусов у заказов. После подтверждения заказ покупателя переходит в статус Оформлен, а каждому товару в заказе присваивается статус - Ожидает подтверждение.
Каждый поставщик, по мере отправления заказов меняет статус своих товаров. Как только все товары в заказе перейдут в статус Доставлено, он будет Закрыт.
Все статусы:
  * Статусы заказа:
    * Статус корзины,
    * Оформлен,
    * Закрыт.
  * Статусы товаров в заказе:
    * Ожидает подтверждения,
    * Подтвержден поставщиком,
    * Собран,
    * Передан в доставку,
    * В пути,
    * Доставлен.
    
  Поэтому в качестве id при смене статуса доставки товара нужно указывать order_items_id.
